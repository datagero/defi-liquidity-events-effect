<!DOCTYPE html>
<html>
<head>
  <title>Data Flow Flowchart</title>
  <style>
    .flowchart-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      margin: 20px;
    }
    .step {
      width: 300px;
      padding: 10px;
      border: 2px solid #000;
      background-color: #f9f9f9;
      text-align: center;
      font-family: 'Comic Sans MS', cursive, sans-serif;
    }
    .arrow {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 20px;
    }
    .arrow::before {
      content: "";
      display: inline-block;
      width: 60px;
      height: 2px;
      background-color: #000;
      margin: 0 5px;
    }
    .example {
      font-size: 12px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="flowchart-container">
    <div class="step">Design Target Variable and Determine Temporal Horizons</div>
    <div class="arrow">⬇</div>
    <div class="step">Perform Feature Engineering for Direct Pool Features with Finite Lag
      <div class="example">
        <table>
          <tr>
            <th>pool</th>
            <th>blockNumber</th>
            <th>blockNumberChain</th>
            <th>other_blockNumberChain</th>
          </tr>
          <tr>
            <td>500</td>
            <td>14498564</td>
            <td>[14498564, nan, nan, nan]</td>
            <td>[14498564, nan, nan, nan]</td>
          </tr>
          <tr>
            <td>500</td>
            <td>14498699</td>
            <td>[14498699, 14498564, nan, nan]</td>
            <td>[14498699, nan, nan, nan]</td>
          </tr>
          <tr>
            <td>500</td>
            <td>14499597</td>
            <td>[14499597, 14498699, 14498564, nan]</td>
            <td>[14499597, 14499560, 14499457, 14499198]</td>
          </tr>
          <tr>
            <td>500</td>
            <td>14499836</td>
            <td>[14499836, 14499597, 14498699, 14498564]</td>
            <td>[14499836, 14499560, 14499457, 14499198]</td>
          </tr>
          <tr>
            <td>500</td>
            <td>14500355</td>
            <td>[14500355, 14499836, 14499597, 14498699]</td>
            <td>[14500355, 14500043, 14499560, 14499457]</td>
          </tr>
        </table>
      </div>
    </div>
    <div class="arrow">⬇</div>
    <div class="step">Perform Feature Engineering for CEX Spillover Features</div>
    <div class="arrow">⬇</div>
    <div class="step">Build Base Horizon Table: Extrapolation of Reference Block + 10 blocks, until next reference block</div>
    <div class="arrow">⬇</div>
    <div class="step">Map DEX - Direct Pool to Base Horizon Table</div>
    <div class="arrow">⬇</div>
    <div class="step">Link CEX: Binance to Nearest Etherscan Block based on Timestamp</div>
    <div class="arrow">⬇</div>
    <div class="step">Perform CEX Aggregate (blocks)</div>
    <div class="arrow">⬇</div>
    <div class="step">Map CEX Aggregate (blocks) to Base Horizon Table</div>
    <div class="arrow">⬇</div>
    <div class="step">Aggregate (horizon blocks) CEX - Spillover Features</div>
    <div class="arrow">⬇</div>
    <div class="step">Address Complexity and Ensure Scalability Completion</div>
  </div>
</body>
</html>
